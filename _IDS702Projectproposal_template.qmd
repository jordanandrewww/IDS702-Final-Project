---
title: "Project Proposal"
author: "Jordan Andrew, Pranshul Bhatnagar, Arushi Singh, and Jay Wu"
subtitle: "Due November 16 at 11:59pm"
format: pdf
editor: visual
---

#### Load Packages

```{r load-packages, message = FALSE, warning = FALSE}
library(tidyverse)
library(dplyr)
```

# Dataset 1 (top choice)

**Data source:** Kaggle - <https://www.kaggle.com/datasets/catherinerasgaitis/mxmh-survey-results> (10/10 usability ranking)

**Brief description:**

This data set, which is called Music & Mental Health Survey Results, aims to capture any possible correlation between one's music taste and their self-reported mental health. This data set includes responses from 736 people and contains 33 variables, of which there are a mix of numeric and categorical. The data was collected between August and November of 2022 via a google form that was posted in various Reddit forums, Discord servers, and social media platforms. Posters and "business cards" were also used to advertise the form in libraries, parks, and other public locations. Each row represents a single person, and they were asked questions like their age, how many hours they spend listening to music each day, what streaming service they use most often, and to rank their experiences with various mental illnesses on a scale of 1-10.

**Research question 1:** How does the number of hours spent listening to music per day vary by anxiety status and primary streaming service?

-   Outcome variable (include the name/description and type of variable):
    -   Name: Hours.per.day
    -   Description: The self-reported number of hours each participant spends listening to music in a typical day
    -   Type of variable: Continuous

**Research question 2:** Are individuals who identify as instrumentalists or composers less likely to report symptoms of insomnia compared to non-musicians?

-   Outcome variable (include the name/description and type of variable):
    -   Name: Insomnia
    -   Description: Self-reported measure indicating whether the participant experiences insomnia symptoms (e.g., difficulty falling or staying asleep); rated on a scale of 1-10, where we will say:
        -   **0 = No or mild insomnia** (ratings 1–5)
        -   **1 = Moderate to severe insomnia** (ratings 6–10)
    -   Type of variable: Binary

**Load the data and provide a `glimpse()`**:

```{r data-1, warning=FALSE}
library(dplyr)
music_data <- read.csv("data/mxmh_survey_results.csv")
glimpse(music_data)

```

**Exploratory Plots:**

```{r plots-1}

# -------------------------------------------------------------------
# EDA for Research Question 1:
# How does the number of hours spent listening to music per day vary
# by anxiety status and primary streaming service?
# -------------------------------------------------------------------

# 1. Outcome variable plot (Hours per day)
ggplot(music_data, aes(x = Hours.per.day)) +
  geom_histogram(fill = "#69b3a2", bins = 20, color = "white") +
  labs(
    title = "Distribution of Hours Spent Listening to Music per Day",
    x = "Hours per Day",
    y = "Count"
  ) +
  theme_minimal(base_size = 14)


# 2. Relationship plot: Hours per day vs. Streaming Service, by Anxiety
music_data <- music_data %>%
  mutate(
    anxiety_group = case_when(
      Anxiety <= 3 ~ "Low (1–3)",
      Anxiety <= 7 ~ "Moderate (4–7)",
      Anxiety > 7 ~ "High (8–10)"
    ),
    anxiety_group = factor(anxiety_group, levels = c("Low (1–3)", "Moderate (4–7)", "High (8–10)"))
  )

ggplot(music_data, aes(x = Primary.streaming.service, y = Hours.per.day, fill = anxiety_group)) +
  geom_boxplot() +
  labs(
    title = "Hours per Day by Streaming Service and Anxiety Group",
    x = "Primary Streaming Service",
    y = "Hours per Day",
    fill = "Anxiety Group"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

```{r}
music_data <- music_data %>%
  mutate(
    insomnia_binary = ifelse(Insomnia >= 6, 1, 0),
    insomnia_binary = factor(insomnia_binary, labels = c("Low/Mild (1–5)", "Moderate/Severe (6–10)"))
  )

# -------------------------------------------------------------------
# EDA for Research Question 2
# -------------------------------------------------------------------

# 1. Plot outcome variable: Insomnia Binary
ggplot(music_data, aes(x = insomnia_binary, fill = insomnia_binary)) +
  geom_bar() +
  scale_fill_manual(values = c("#8ecae6", "#ffb703")) +
  labs(
    title = "Prevalence of Moderate to Severe Insomnia",
    x = "Insomnia Status",
    y = "Number of Participants"
  ) +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")


# 2. Relationship plot: Insomnia by Musical Engagement
music_data %>%
  mutate(musician_type = case_when(
    Instrumentalist == "Yes" & Composer == "Yes" ~ "Both",
    Instrumentalist == "Yes" ~ "Instrumentalist Only",
    Composer == "Yes" ~ "Composer Only",
    TRUE ~ "Neither"
  )) %>%
  ggplot(aes(x = musician_type, fill = insomnia_binary)) +
  geom_bar(position = "fill") +
  scale_y_continuous(labels = scales::percent) +
  labs(
    title = "Insomnia Prevalence by Musical Engagement",
    x = "Musician Type",
    y = "Percentage of Participants",
    fill = "Insomnia Status"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 30, hjust = 1))


```

# Dataset 2

**Data source:**

Kaggle (**2025 Travelers UMC)**

Link: <https://www.kaggle.com/competitions/2025-travelers-umc>\
(It is a private link, but we have datasets)

**Brief description:**

This dataset contains **18000 rows** and **29 columns**, representing detailed records of auto insurance claims referred to the subrogation team between 2020 and 2021. The variables capture driver demographics, vehicle characteristics, claim details, and contextual factors such as liability percentage and accident type. Each row corresponds to a unique insurance claim, allowing investigation of how these factors relate to subrogation outcomes and estimated payout amounts.

**Research question 1:**

Are claims with a higher estimated policyholder liability percentage (*liab_prct*) less likely to result in subrogation?

-   Outcome variable (include the name/description and type of variable):

    **`subrogation`** – Indicator of whether the claim was subrogated (1 = yes, 0 = no).\
    **Type:** *Binary*

**Research question 2:**

Does the estimated payout amount (*claim_est_payout*) differ significantly by accident type (*accident_type*) and the presence of a witness (*witness_present_ind*)?

-   Outcome variable (include the name/description and type of variable):\
    **`claim_est_payout`** – Estimated payout amount for the claim.\
    **Type:** *Continuous*

**Load the data and provide a `glimpse()`**:

```{r data-2, warning=FALSE}
df <- read.csv("data/Training_TriGuard.csv")
glimpse(my_data)
```

**Exploratory Plots:**

```{r}

# Keep only relevant variables
eda_df <- df %>%
  select(subrogation, liab_prct) %>%
  filter(!is.na(subrogation), !is.na(liab_prct)) %>%
  mutate(subrogation = factor(subrogation, labels = c("No Subrogation", "Subrogated")))

# --- Plot 1: Distribution of the outcome variable (subrogation) ---
ggplot(eda_df, aes(x = subrogation, fill = subrogation)) +
  geom_bar(alpha = 0.8) +
  theme_minimal() +
  scale_fill_manual(values = c("#F08080", "#66C2A5")) +
  labs(
    title = "Distribution of Claims by Subrogation Status",
    x = "Subrogation Status",
    y = "Number of Claims",
    fill = "Subrogation Status"
  )

# --- Plot 2: Relationship between liability % and subrogation ---
ggplot(eda_df, aes(x = liab_prct, fill = subrogation)) +
  geom_density(alpha = 0.6) +
  theme_minimal() +
  scale_fill_manual(values = c("#F08080", "#66C2A5")) +
  labs(
    title = "Distribution of Policyholder Liability Percentage by Subrogation Status",
    x = "Policyholder Liability Percentage (liab_prct)",
    y = "Density",
    fill = "Subrogation Status"
  )



```

```{r}

# Keep only relevant variables
eda_df <- df %>%
  select(claim_est_payout, accident_type, witness_present_ind) %>%
  filter(!is.na(claim_est_payout), !is.na(accident_type), !is.na(witness_present_ind)) %>%
  mutate(
    witness_present_ind = factor(witness_present_ind, labels = c("No Witness", "Witness Present"))
  )

# --- Plot 1: Distribution of outcome variable (claim_est_payout) ---
ggplot(eda_df, aes(x = claim_est_payout)) +
  geom_histogram(fill = "#66C2A5", color = "black", bins = 30, alpha = 0.8) +
  theme_minimal() +
  labs(
    title = "Distribution of Estimated Claim Payout Amounts",
    x = "Claim Estimated Payout (claim_est_payout)",
    y = "Number of Claims"
  )

# --- Plot 2: Distribution of payout by accident type and witness presence ---
ggplot(eda_df, aes(x = accident_type, y = claim_est_payout, fill = witness_present_ind)) +
  geom_boxplot(alpha = 0.7, outlier.color = "red") +
  theme_minimal() +
  scale_fill_manual(values = c("#F08080", "#66C2A5")) +
  labs(
    title = "Estimated Claim Payout by Accident Type and Witness Presence",
    x = "Accident Type",
    y = "Estimated Claim Payout (claim_est_payout)",
    fill = "Witness Presence"
  )

```

# Team Charter

#### When will you meet as a team to work on the project components? Will these meetings be held in person or virtually?

We will meet virtually at least once a week to discuss anything we have completed so far and to figure out what else needs to be completed during the following week. This way we all stay updated and on track, but can do work outside of group meetings.

#### What is your group policy on missing team meetings (e.g., how much advance notice should be provided)?

Our group policy is that we try to provide 24 hours notice for missing meetings.

#### How will your team communicate (email, Slack, text messages)? What is your policy on appropriate response time (within a certain number of hours? Nights/weekends?)?

We communicate via Whatsapp, and our policy is to respond within 2 hours. If it is past 10pm, you don't need to respond until the next morning.
